<div
  class="c-file-upload qa-file-upload"
  [class.c-file-upload--drag]="dragInProgress"
  [class.c-file-upload--file]="file"
  [class.c-file-upload--error]="file && !file.isValid"
  tabindex="1"
  fxLayout="row"
  fxLayoutAlign="start center"
  [fxLayoutGap]="layoutGap"
>

  <div
    class="c-file-upload__empty"
    fxLayout="row"
    fxLayoutAlign="start center"
    fxFlex="grow"
    *ngIf="!file"
  >
    <!--
      NOTE: If the copy isn't touching the </ts-icon> closing tag too much space will exist between the icon and text
    -->
    <ts-icon inline="true">
      cloud_upload
    </ts-icon>Drop files here
  </div>

  <div
    class="c-file-upload__file"
    [class.c-file-upload__file--hidden]="!file"
    fxFlex
    fxLayout="column"
    fxLayoutAlign="center start"
  >

    <div
      fxFill
      fxLayout="row"
      fxLayoutAlign="start center"
    >
      <div
        class="c-file-upload__preview"
        [hidden]="!file"
        fxFlex="noshrink"
      >
        <img
          #preview
          alt=""
          *ngIf="file?.isImage"
        >

        <ts-icon
          [svgIcon]="'csv'"
          *ngIf="file?.isCSV"
        ></ts-icon>
      </div>

      <div
        class="c-file-upload__filename"
        fxFlex="grow"
        fxLayout="row"
        fxLayoutAlign="start center"
        title="{{ file?.name }}"
      >
        <div class="c-file-upload__filename-inner">
          {{ file?.name }}
        </div>
      </div>

      <ts-tooltip tooltipValue="Remove file">
        <ts-icon-button
          class="c-file-upload__remove qa-file-upload-remove"
          theme="warn"
          actionName="Reset"
          (click)="removeFile($event)"
        >clear</ts-icon-button>
      </ts-tooltip>
    </div>

    <!--
       -<mat-progress-bar
       -  class="c-file-upload__progress"
       -  [value]="file.progress"
       -></mat-progress-bar>
       -->
  </div>

  <ts-button
    class="c-file-upload__prompt qa-file-upload-prompt"
    [isDisabled]="dragInProgress"
    (clickEvent)="promptForFiles()"
  >
    {{ dragInProgress ? 'Drop File' : 'Select File' }}
  </ts-button>
</div>

<ts-validation-messages
  class="qa-file-upload-validation-messages"
  *ngIf="control"
  [control]="control"
></ts-validation-messages>
